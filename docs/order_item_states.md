# Состояния пункта заказа

## Сущности

**Заказ** (*order*) - множество *пунктов заказа*, объединённых общим свойством: они заказаны одним и тем же клиентом.
*Заказ* связан с клиентом, его заказавшим, официантом, обслуживающим этого клиента, и номером столика, занимаемого клиентом.
*Заказ* может обладать некоторым произвольным текстовым комментарием к нему.

**Пункт заказа** (*order item*) - некоторое блюдо из предоставляемого меню, с указанием объёма порции/количества порций, заказанное некоторым клиентом. Совокупность идентификатора блюда и количества порций будем называть *содержанием пункта заказа*.
*Пункт заказа*, кроме содержания, может обладать некоторым произвольным текстовым комментарием к нему.
*Пункт заказа* связан не только с самим *заказом*, к которому он принадлежит, но и с поваром, его выполнившим.

*Пункт заказа* и *заказ* могут находиться в одном из нескольких состояний и изменять своё состояние.

## Состояния пункта заказа

*Пункт заказа* может находиться в одном из следующих состояний:

- **принят**: содержание пункта заказа сообщено клиентом официанту, и занесено официантом в систему; это состояние автоматически присваивается пункту заказа при его создании;
- **в обработке**: повар начал выполнение данного пункта заказа (готовку указанного в нём блюда в указанных в нём количествах). Данное состояние присваивается пункту заказа поваром, начавшим его исполнение;
- **готов**: повар завершил выполнение данного пункта заказа, и официант может отнести его клиенту. Перевод пункта заказа в данное состояние осуществляется поваром, его исполнившим;
- **ожидает оплаты**: официант забрал данный пункт заказа с кухни и отнёс его клиенту. Состояние присваивается официантом, обслуживающим данного клиента;
- **закрыт**: клиент оплатил данный пункт заказа; перевод в состояние осуществляется официантом, принявшим оплату.
- **отменён**: пункт заказа отменён по инициативе клиента. Это может означать, что клиент отказывается от данного пункта заказа, либо он недоволен его выполнением, и возникла конфликтная ситуация. Данное состояние никак не отражает факт оплаты клиентом этого пункта заказа. Перевод в данное состояние осуществляется официантом, обслуживающим указанного клиента.

## Состояния заказа

*Заказ* может находиться в одном из следующих состояний:

- **активен**: в заказе содержится хотя бы один пункт заказа, не находящийся в одном из состояний **закрыт**/**отменён**;
- **закрыт**: все пункты данного заказа находятся в состояниях **закрыт** либо **отменён**.
